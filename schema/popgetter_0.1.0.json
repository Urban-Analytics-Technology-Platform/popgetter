{
  "title": "popgetter_schema",
  "definitions": {
    "CountryMetadata": {
      "title": "CountryMetadata",
      "type": "object",
      "properties": {
        "name_short_en": {
          "title": "Name Short En",
          "description": "The short name of the country in English (for example 'Belgium').",
          "type": "string"
        },
        "name_official": {
          "title": "Name Official",
          "description": "The official name of the country (for example 'Kingdom of Belgium'). In English if available.",
          "type": "string"
        },
        "iso3": {
          "title": "Iso3",
          "description": "The ISO3 code of the country (for example 'BEL').",
          "type": "string"
        },
        "iso2": {
          "title": "Iso2",
          "description": "The ISO2 code of the country (for example 'BE').",
          "type": "string"
        }
      },
      "required": [
        "name_short_en",
        "name_official",
        "iso3",
        "iso2"
      ]
    },
    "DataPublisher": {
      "title": "DataPublisher",
      "type": "object",
      "properties": {
        "name": {
          "title": "Name",
          "description": "The name of the organisation publishing the data",
          "type": "string"
        },
        "url": {
          "title": "Url",
          "description": "The url of the publisher's homepage.",
          "type": "string"
        },
        "description": {
          "title": "Description",
          "description": "A brief description of the organisation publishing the data, including its mandate.",
          "type": "string"
        },
        "countries_of_interest": {
          "title": "Countries Of Interest",
          "description": "A list of countries for which the publisher has data available.",
          "type": "array",
          "items": {
            "$ref": "#/definitions/CountryMetadata"
          }
        }
      },
      "required": [
        "name",
        "url",
        "description",
        "countries_of_interest"
      ]
    },
    "SourceDataRelease": {
      "title": "SourceDataRelease",
      "type": "object",
      "properties": {
        "name": {
          "title": "Name",
          "description": "The name of the data release, as given by the publisher",
          "type": "string"
        },
        "id": {
          "title": "Id",
          "description": "A unique identifier for the data release. This should be unique across all data releases from all publishers, but it is the client's responsibility to enforce this. If not specified, a UUID will be generated.",
          "type": "string"
        },
        "date_published": {
          "title": "Date Published",
          "description": "The date on which the data was published",
          "type": "string",
          "format": "date"
        },
        "reference_period": {
          "title": "Reference Period",
          "description": "The range of time for which the data can be assumed to be valid. Should be in the format (start_date, end_date). If the data represents a single day snapshot, end_date should be `None`.",
          "type": "array",
          "minItems": 2,
          "maxItems": 2,
          "items": [
            {
              "type": "string",
              "format": "date"
            },
            {
              "type": "string",
              "format": "date"
            }
          ]
        },
        "collection_period": {
          "title": "Collection Period",
          "description": "The range of time during which the data was collected. Should be in the format (start_date, end_date). If the data represents a single day snapshot, end_date should be `None`.",
          "type": "array",
          "minItems": 2,
          "maxItems": 2,
          "items": [
            {
              "type": "string",
              "format": "date"
            },
            {
              "type": "string",
              "format": "date"
            }
          ]
        },
        "expect_next_update": {
          "title": "Expect Next Update",
          "description": "The date on which is it expected that an updated edition of the data will be published. In same cases this will be the same as the `reference_period[1]`.",
          "type": "string",
          "format": "date"
        },
        "url": {
          "title": "Url",
          "description": "The url of the data release.",
          "type": "string"
        },
        "publishing_organisation": {
          "title": "Publishing Organisation",
          "description": "The publisher of the data",
          "allOf": [
            {
              "$ref": "#/definitions/DataPublisher"
            }
          ]
        },
        "description": {
          "title": "Description",
          "description": "A description of the data release",
          "type": "string"
        },
        "geography_file": {
          "title": "Geography File",
          "description": "The path of the geography file",
          "type": "string"
        },
        "geography_level": {
          "title": "Geography Level",
          "description": "The level of the geography",
          "type": "string"
        },
        "countries_of_interest": {
          "title": "Countries Of Interest",
          "description": "A list of the countries for which the data is available",
          "type": "array",
          "items": {
            "$ref": "#/definitions/CountryMetadata"
          }
        },
        "available_metrics":{
          "title":"The metrics from this data source",
          "description":"A list of metrics that are provided by this source",
          "type":"array",
          "items":{
            "$ref":"#/definitions/MetricMetadata"
          }
        }
      },
      "required": [
        "name",
        "date_published",
        "reference_period",
        "collection_period",
        "expect_next_update",
        "url",
        "publishing_organisation",
        "description",
        "geography_file",
        "geography_level",
        "countries_of_interest"
      ]
    },
    "MetricMetadata": {
      "title": "MetricMetadata",
      "type": "object",
      "properties": {
        "human_readable_name": {
          "title": "Human Readable Name",
          "description": "A human readable name for the metric, something like \"Total Population under 12 years old\"",
          "type": "string"
        },
        "source_metric_id": {
          "title": "Source Metric Id",
          "description": "The name of the metric that comes from the source dataset ( for example in the ACS this might be \"B001_E001\" or something similar",
          "type": "string"
        },
        "description": {
          "title": "Description",
          "description": "A longer description of the metric which might include info on the caveats for the metric",
          "type": "string"
        },
        "hxl_tag": {
          "title": "Hxl Tag",
          "description": "Field description using the Humanitarian eXchange Language (HXL) standard",
          "type": "string"
        },
        "metric_parquet_file_url": {
          "title": "Metric Parquet File Url",
          "description": "The relative path output file that contains this metric value. This should be relative to the root of a base URL defined at project level and should NOT include the file extension",
          "type": "string"
        },
        "parquet_column_name": {
          "title": "Parquet Column Name",
          "description": "Name of column in the outputted parquet file which contains the metric",
          "type": "string"
        },
        "parquet_margin_of_error_column": {
          "title": "Parquet Margin Of Error Column",
          "description": "Name of the column if any that contains the margin of error for the metric",
          "union_mode": "smart",
          "type": "string"
        },
        "parquet_margin_of_error_file": {
          "title": "Parquet Margin Of Error File",
          "description": "Location (url) of the parquet file that contains the margin of error for the metric",
          "union_mode": "smart",
          "type": "string"
        },
        "potential_denominator_ids": {
          "title": "Potential Denominator Ids",
          "description": "A list of metrics which are suitable denominators for this metric.",
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "parent_metric_id": {
          "title": "Parent Metric Id",
          "description": "Metric if any which is the parent to this one ( some census data like the ACS is organised hierarchically, this can be useful for making the metadata more searchable)",
          "union_mode": "smart",
          "type": "string"
        },
        "source_data_release_id": {
          "title": "Source Data Release Id",
          "description": "The id of the data release from which this metric comes",
          "type": "string"
        },
        "source_download_url": {
          "title": "Source Download Url",
          "description": "The url used to download the data from source.",
          "type": "string"
        },
        "source_archive_file_path": {
          "title": "Source Archive File Path",
          "description": "(Optional), If the downloaded data is in an archive file (eg zip, tar, etc), this field is the path with the archive to locate the data file.",
          "union_mode": "smart",
          "type": "string"
        },
        "source_documentation_url": {
          "title": "Source Documentation Url",
          "description": "The documentation of the data release in human readable form.",
          "type": "string"
        }
      },
      "required": [
        "human_readable_name",
        "source_metric_id",
        "description",
        "hxl_tag",
        "parquet_column_name"
      ]
    }
  },
  "version": "0.1.0"
}
